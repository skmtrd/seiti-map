# è–åœ°å·¡ç¤¼ãƒãƒƒãƒ— - æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯è©³ç´°

## ğŸ› ï¸ æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ä¸€è¦§

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰

#### Next.js 15.3.3
- **ç”¨é€”**: Reactãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã€SSR/SSGã€ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
- **å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: https://nextjs.org/docs
- **è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«**: `next.config.ts`
- **ç‰¹å¾´**: App Router, React Server Componentså¯¾å¿œ

#### React 19
- **ç”¨é€”**: UIãƒ©ã‚¤ãƒ–ãƒ©ãƒª
- **å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: https://react.dev/
- **æ–°æ©Ÿèƒ½**: Concurrent Features, Automatic Batching

#### react-map-gl
- **ç”¨é€”**: Mapbox GL JSã®Reactãƒ©ãƒƒãƒ‘ãƒ¼
- **å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: https://visgl.github.io/react-map-gl/
- **ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«**: `npm install react-map-gl mapbox-gl`
- **å¿…è¦ãªAPIã‚­ãƒ¼**: Mapbox Access Token

#### Tailwind CSS 4
- **ç”¨é€”**: CSSãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
- **å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: https://tailwindcss.com/docs
- **è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«**: `tailwind.config.js`
- **PostCSS**: `postcss.config.mjs`

#### TypeScript
- **ç”¨é€”**: å‹å®‰å…¨æ€§ã®æä¾›
- **è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«**: `tsconfig.json`
- **å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: https://www.typescriptlang.org/docs/

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰

#### Supabase
- **ç”¨é€”**: Backend as a Service
- **å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: https://supabase.com/docs
- **ä¸»è¦æ©Ÿèƒ½**:
  - PostgreSQLãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
  - ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ©Ÿèƒ½
  - èªè¨¼ï¼ˆAuthï¼‰
  - ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ï¼ˆç”»åƒãƒ»ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
  - Edge Functionsï¼ˆã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹é–¢æ•°ï¼‰

#### PostgreSQL
- **ç”¨é€”**: ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒŠãƒ«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
- **ç‰¹å¾´**: GISæ‹¡å¼µï¼ˆPostGISï¼‰å¯¾å¿œå¯èƒ½
- **Supabaseå†…**: ç®¡ç†ä¸è¦

### é–‹ç™ºãƒ„ãƒ¼ãƒ«

#### Biome
- **ç”¨é€”**: ãƒªãƒ³ã‚¿ãƒ¼ãƒ»ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãƒ¼
- **è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«**: `biome.json`
- **å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: https://biomejs.dev/
- **ç‰¹å¾´**: ESLint + Prettierã®ä»£æ›¿ã€é«˜é€Ÿ

#### Lefthook
- **ç”¨é€”**: Git Hooksç®¡ç†
- **è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«**: `lefthook.yml`
- **å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: https://github.com/evilmartians/lefthook
- **ç‰¹å¾´**: ä¸¦åˆ—å®Ÿè¡Œã€è¨­å®šãŒç°¡å˜

## ğŸ“¦ å¿…è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸

### æ—¢ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿
```json
{
  "dependencies": {
    "react": "^19.0.0",
    "react-dom": "^19.0.0",
    "next": "15.3.3"
  },
  "devDependencies": {
    "typescript": "^5",
    "@types/node": "^20",
    "@types/react": "^19",
    "@types/react-dom": "^19",
    "@tailwindcss/postcss": "^4",
    "tailwindcss": "^4",
    "@biomejs/biome": "^latest",
    "lefthook": "^latest"
  }
}
```

### ä»Šå¾Œã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«äºˆå®š
```bash
# ãƒãƒƒãƒ—é–¢é€£
npm install react-map-gl mapbox-gl
npm install @types/mapbox-gl

# Supabase
npm install @supabase/supabase-js

# UI/UX ãƒ©ã‚¤ãƒ–ãƒ©ãƒªï¼ˆçµ±ä¸€ä½¿ç”¨ï¼‰
npm install @radix-ui/react-slot @radix-ui/react-separator
npm install shadcn-ui lucide-react
npm install clsx tailwind-merge
npm install nuqs

# ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚§ãƒƒãƒãƒ³ã‚°ãƒ»çŠ¶æ…‹ç®¡ç†
npm install swr

# ãƒ•ã‚©ãƒ¼ãƒ ç®¡ç†
npm install react-hook-form @hookform/resolvers zod

# ç”»åƒå‡¦ç†ãƒ»æœ€é©åŒ–
npm install next-optimized-images
npm install imagemin imagemin-mozjpeg imagemin-pngquant

# ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
npm install date-fns
npm install uuid @types/uuid
```

## ğŸ“‹ é–‹ç™ºã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³

### ğŸ—„ï¸ ãƒ‡ãƒ¼ã‚¿ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°æˆ¦ç•¥

#### Server Components + Server Actionsï¼ˆæ¨å¥¨ï¼‰
**é©ç”¨æ¡ä»¶**: ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œã«ä¾å­˜ã—ãªã„ãƒ‡ãƒ¼ã‚¿å–å¾—ãƒ»æ›´æ–°

```typescript
// âœ… Good: Server Component ã§ã®ãƒ‡ãƒ¼ã‚¿å–å¾—
async function SpotsPage() {
  const spots = await getSpots(); // Server Action
  
  return (
    <div>
      {spots.map(spot => <SpotCard key={spot.id} spot={spot} />)}
    </div>
  );
}

// âœ… Good: Server Action ã§ã®æ›´æ–°
async function createSpot(formData: FormData) {
  'use server';
  
  const data = {
    name: formData.get('name'),
    latitude: formData.get('latitude'),
    // ...
  };
  
  await supabase.from('spots').insert(data);
  revalidatePath('/spots');
}
```

#### Client Components + Server Actions + useSWR
**é©ç”¨æ¡ä»¶**: ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œã«ä¾å­˜ã™ã‚‹ãƒ‡ãƒ¼ã‚¿å–å¾—ãƒ»æ›´æ–°

```typescript
// âœ… Good: Client Component ã§ã®å‹•çš„ãƒ‡ãƒ¼ã‚¿å–å¾—
'use client';

import useSWR from 'swr';

function InteractiveSpotsList() {
  const { data: spots, mutate } = useSWR('/api/spots', fetcher);
  
  const handleLike = async (spotId: string) => {
    // æ¥½è¦³çš„æ›´æ–°
    mutate(
      spots?.map(spot => 
        spot.id === spotId ? { ...spot, liked: true } : spot
      ),
      false
    );
    
    // Server Action å®Ÿè¡Œ
    await likeSpot(spotId);
    
    // ãƒ‡ãƒ¼ã‚¿å†å–å¾—
    mutate();
  };

  return (
    <div>
      {spots?.map(spot => (
        <SpotCard 
          key={spot.id} 
          spot={spot} 
          onLike={() => handleLike(spot.id)} 
        />
      ))}
    </div>
  );
}
```

### ğŸ¨ UIãƒ»ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆçµ±ä¸€ãƒ«ãƒ¼ãƒ«

#### shadcn/ui ã®çµ±ä¸€ä½¿ç”¨
```bash
# shadcn/ui ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
npx shadcn-ui@latest init
npx shadcn-ui@latest add button
npx shadcn-ui@latest add card
npx shadcn-ui@latest add input
npx shadcn-ui@latest add dialog
```

```typescript
// âœ… Good: shadcn/ui ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä½¿ç”¨
import { Button } from "@/components/ui/button";
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";

// âŒ Bad: è‡ªä½œUIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
// const CustomButton = () => <button className="...">
```

#### lucide-react ã‚¢ã‚¤ã‚³ãƒ³çµ±ä¸€
```typescript
// âœ… Good: lucide-react ä½¿ç”¨
import { MapPin, Heart, Star } from 'lucide-react';

function SpotCard({ spot }: { spot: Spot }) {
  return (
    <Card>
      <CardHeader>
        <CardTitle className="flex items-center gap-2">
          <MapPin className="h-4 w-4" />
          {spot.name}
        </CardTitle>
      </CardHeader>
    </Card>
  );
}

// âŒ Bad: ä»–ã®ã‚¢ã‚¤ã‚³ãƒ³ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚„SVG
// import { FaMapMarker } from 'react-icons/fa';
```

### ğŸ”— URLçŠ¶æ…‹ç®¡ç†ï¼ˆnuqsçµ±ä¸€ï¼‰

```typescript
// âœ… Good: nuqs ã§URLçŠ¶æ…‹ç®¡ç†
'use client';

import { useQueryState } from 'nuqs';

function SearchFilters() {
  const [workType, setWorkType] = useQueryState('type', {
    defaultValue: 'all'
  });
  const [region, setRegion] = useQueryState('region');

  return (
    <div>
      <select 
        value={workType} 
        onChange={e => setWorkType(e.target.value)}
      >
        <option value="all">ã™ã¹ã¦</option>
        <option value="anime">ã‚¢ãƒ‹ãƒ¡</option>
        <option value="drama">ãƒ‰ãƒ©ãƒ</option>
      </select>
    </div>
  );
}

// âŒ Bad: useState ã§ãƒ­ãƒ¼ã‚«ãƒ«çŠ¶æ…‹ç®¡ç†
// const [workType, setWorkType] = useState('all');
```

### ğŸš€ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ãƒ«ãƒ¼ãƒ«

#### 1. RSCå„ªå…ˆã€Client Componentã¯æœ€å°é™
```typescript
// âœ… Good: Server Component å„ªå…ˆ
async function SpotDetail({ spotId }: { spotId: string }) {
  const spot = await getSpotById(spotId);
  
  return (
    <div>
      <h1>{spot.name}</h1>
      <p>{spot.description}</p>
      {/* é™çš„ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¯Server Componentã§ */}
      
      {/* ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªéƒ¨åˆ†ã®ã¿Client Component */}
      <LikeButton spotId={spotId} />
    </div>
  );
}

// âœ… Good: å¿…è¦ãªéƒ¨åˆ†ã®ã¿Client Component
'use client';
function LikeButton({ spotId }: { spotId: string }) {
  const [liked, setLiked] = useState(false);
  // ...
}
```

#### 2. å‹•çš„import + Suspense
```typescript
// âœ… Good: é…å»¶èª­ã¿è¾¼ã¿
import { Suspense } from 'react';
import dynamic from 'next/dynamic';

const InteractiveMap = dynamic(() => import('@/components/map/InteractiveMap'), {
  ssr: false,
  loading: () => <div>ãƒãƒƒãƒ—ã‚’èª­ã¿è¾¼ã¿ä¸­...</div>
});

function MapPage() {
  return (
    <Suspense fallback={<div>ãƒšãƒ¼ã‚¸ã‚’èª­ã¿è¾¼ã¿ä¸­...</div>}>
      <InteractiveMap />
    </Suspense>
  );
}
```

#### 3. Next.jsæœ€é©åŒ–æ©Ÿèƒ½ã®æ´»ç”¨
```typescript
// âœ… Good: next/image ä½¿ç”¨
import Image from 'next/image';

function SpotImage({ spot }: { spot: Spot }) {
  return (
    <Image
      src={spot.imageUrl}
      alt={spot.name}
      width={400}
      height={300}
      placeholder="blur"
      blurDataURL="data:image/jpeg;base64,..."
    />
  );
}

// âœ… Good: next/link ä½¿ç”¨
import Link from 'next/link';

function SpotCard({ spot }: { spot: Spot }) {
  return (
    <Link href={`/spots/${spot.id}`} prefetch={false}>
      <Card>...</Card>
    </Link>
  );
}
```

### ğŸ“ ãƒ•ã‚©ãƒ¼ãƒ ãƒ»ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³æˆ¦ç•¥

#### react-hook-form + Zod
```typescript
// schemas/spot.ts
import { z } from 'zod';

export const spotSchema = z.object({
  name: z.string().min(1, 'åå‰ã¯å¿…é ˆã§ã™'),
  description: z.string().max(500, 'èª¬æ˜ã¯500æ–‡å­—ä»¥å†…ã§å…¥åŠ›ã—ã¦ãã ã•ã„'),
  latitude: z.number().min(-90).max(90),
  longitude: z.number().min(-180).max(180),
  workId: z.string().uuid(),
});

export type SpotInput = z.infer<typeof spotSchema>;
```

```typescript
// components/forms/SpotForm.tsx
'use client';

import { useForm } from 'react-hook-form';
import { zodResolver } from '@hookform/resolvers/zod';
import { spotSchema, type SpotInput } from '@/schemas/spot';

function SpotForm() {
  const {
    register,
    handleSubmit,
    formState: { errors, isSubmitting }
  } = useForm<SpotInput>({
    resolver: zodResolver(spotSchema)
  });

  const onSubmit = async (data: SpotInput) => {
    try {
      await createSpot(data); // Server Action
      // æˆåŠŸå‡¦ç†
    } catch (error) {
      // ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
    }
  };

  return (
    <form onSubmit={handleSubmit(onSubmit)}>
      <input 
        {...register('name')} 
        placeholder="ã‚¹ãƒãƒƒãƒˆå"
      />
      {errors.name && <p className="text-red-500">{errors.name.message}</p>}
      
      <Button type="submit" disabled={isSubmitting}>
        {isSubmitting ? 'ä¿å­˜ä¸­...' : 'ä¿å­˜'}
      </Button>
    </form>
  );
}
```

### ğŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ»æ¨©é™ç®¡ç†

#### Server Actions ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æŒ‡é‡
```typescript
// âœ… Good: ç‰¹å®šç”¨é€”ã®Server Action
async function createSpotReview(spotId: string, formData: FormData) {
  'use server';
  
  // 1. èªè¨¼ãƒã‚§ãƒƒã‚¯
  const { data: { user } } = await supabase.auth.getUser();
  if (!user) {
    throw new Error('èªè¨¼ãŒå¿…è¦ã§ã™');
  }
  
  // 2. å…¥åŠ›æ¤œè¨¼
  const reviewData = reviewSchema.parse({
    comment: formData.get('comment'),
    rating: Number(formData.get('rating')),
  });
  
  // 3. æ¨©é™ãƒã‚§ãƒƒã‚¯ï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰
  const spot = await supabase
    .from('spots')
    .select('id')
    .eq('id', spotId)
    .single();
    
  if (!spot.data) {
    throw new Error('ã‚¹ãƒãƒƒãƒˆãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
  }
  
  // 4. ãƒ‡ãƒ¼ã‚¿æŒ¿å…¥ï¼ˆRLS ã«ã‚ˆã‚Šè‡ªå‹•çš„ã« user.id ãŒè¨­å®šã•ã‚Œã‚‹ï¼‰
  const { error } = await supabase
    .from('reviews')
    .insert({
      spot_id: spotId,
      comment: reviewData.comment,
      rating: reviewData.rating,
      // user_id ã¯ RLS + auth.uid() ã«ã‚ˆã‚Šè‡ªå‹•è¨­å®š
    });
    
  if (error) {
    throw new Error('ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®æŠ•ç¨¿ã«å¤±æ•—ã—ã¾ã—ãŸ');
  }
  
  revalidatePath(`/spots/${spotId}`);
}

// âŒ Bad: æ±ç”¨çš„ã™ãã‚‹Server Action
// async function updateDatabase(table: string, data: any, id: string) {
//   'use server';
//   // å±é™ºï¼šä»»æ„ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’æ“ä½œå¯èƒ½
// }
```

#### Supabase RLSè¨­å®šä¾‹
```sql
-- âœ… Good: é©åˆ‡ãªRLSãƒãƒªã‚·ãƒ¼
CREATE POLICY "ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯è‡ªåˆ†ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®ã¿ç·¨é›†å¯èƒ½"
ON reviews FOR UPDATE
USING (auth.uid() = user_id);

CREATE POLICY "æ‰¿èªæ¸ˆã¿ã‚¹ãƒãƒƒãƒˆã¯å…¨å“¡é–²è¦§å¯èƒ½"
ON spots FOR SELECT
USING (is_approved = true);

CREATE POLICY "ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯è‡ªåˆ†ã®ã‚¹ãƒãƒƒãƒˆã‚’æŠ•ç¨¿å¯èƒ½"
ON spots FOR INSERT
WITH CHECK (auth.uid() = user_id);
```

### ğŸ›¡ï¸ ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãƒ»å“è³ªä¿è¨¼

#### ã‚¬ãƒ¼ãƒ‰ç¯€ãƒ‘ã‚¿ãƒ¼ãƒ³
```typescript
// âœ… Good: ã‚¬ãƒ¼ãƒ‰ç¯€ã§æ—©æœŸreturn
async function getSpotById(id: string) {
  if (!id) {
    return null;
  }
  
  const { data: spot, error } = await supabase
    .from('spots')
    .select('*')
    .eq('id', id)
    .single();
    
  if (error) {
    console.error('Spot fetch error:', error);
    return null;
  }
  
  if (!spot) {
    return null;
  }
  
  // æˆåŠŸãƒ‘ã‚¹
  return {
    ...spot,
    createdAt: new Date(spot.created_at),
    updatedAt: new Date(spot.updated_at),
  };
}

// âŒ Bad: ãƒã‚¹ãƒˆã—ãŸæ¡ä»¶åˆ†å²
// async function getSpotById(id: string) {
//   if (id) {
//     const result = await supabase...
//     if (!result.error) {
//       if (result.data) {
//         return result.data;
//       }
//     }
//   }
//   return null;
// }
```

#### ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£å¯¾å¿œ
```typescript
// âœ… Good: ã‚¢ã‚¯ã‚»ã‚·ãƒ–ãƒ«ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
function SpotCard({ spot }: { spot: Spot }) {
  return (
    <Card>
      <CardHeader>
        <CardTitle>
          <Link 
            href={`/spots/${spot.id}`}
            aria-label={`${spot.name}ã®è©³ç´°ã‚’è¦‹ã‚‹`}
          >
            {spot.name}
          </Link>
        </CardTitle>
      </CardHeader>
      <CardContent>
        <p>{spot.description}</p>
        <Button
          onClick={() => handleLike(spot.id)}
          aria-label={`${spot.name}ã‚’ãŠæ°—ã«å…¥ã‚Šã«è¿½åŠ `}
          aria-pressed={spot.isLiked}
        >
          <Heart className="h-4 w-4" />
          ãŠæ°—ã«å…¥ã‚Š
        </Button>
      </CardContent>
    </Card>
  );
}
```

## ğŸš« ç¦æ­¢äº‹é …ãƒ»éæ¨å¥¨ãƒ‘ã‚¿ãƒ¼ãƒ³

### âŒ ä½¿ç”¨ç¦æ­¢
- ã‚°ãƒ­ãƒ¼ãƒãƒ«çŠ¶æ…‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªï¼ˆReduxã€Zustandç­‰ï¼‰
- è‡ªä½œUIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆshadcn/uiå„ªå…ˆï¼‰
- lucide-reactä»¥å¤–ã®ã‚¢ã‚¤ã‚³ãƒ³ãƒ©ã‚¤ãƒ–ãƒ©ãƒª
- useState ã§ã®URLçŠ¶æ…‹ç®¡ç†

### âš ï¸ æœ€å°é™ã«æŠ‘åˆ¶
- `'use client'` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–
- `useEffect`, `useState`
- æ±ç”¨çš„ãªServer Actions

## ğŸ”§ é–‹ç™ºç’°å¢ƒè¨­å®š

### ç’°å¢ƒå¤‰æ•°ï¼ˆ.env.localï¼‰
```env
# Mapbox
NEXT_PUBLIC_MAPBOX_ACCESS_TOKEN=your_mapbox_token

# Supabase
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key

# ãã®ä»–
NEXT_PUBLIC_APP_URL=http://localhost:3000
```

### å¿…è¦ãªã‚¢ã‚«ã‚¦ãƒ³ãƒˆãƒ»ã‚µãƒ¼ãƒ“ã‚¹
1. **Mapbox Account**: https://account.mapbox.com/
2. **Supabase Account**: https://supabase.com/
3. **Vercel Account** (ãƒ‡ãƒ—ãƒ­ã‚¤ç”¨): https://vercel.com/

## ğŸ“ æ¨å¥¨ãƒ•ã‚©ãƒ«ãƒ€æ§‹æˆ

```
src/
â”œâ”€â”€ app/                    # App Routerï¼ˆNext.js 13+ï¼‰
â”‚   â”œâ”€â”€ globals.css
â”‚   â”œâ”€â”€ layout.tsx
â”‚   â”œâ”€â”€ page.tsx
â”‚   â”œâ”€â”€ (auth)/            # èªè¨¼é–¢é€£ã®ãƒšãƒ¼ã‚¸
â”‚   â”œâ”€â”€ spots/             # ã‚¹ãƒãƒƒãƒˆé–¢é€£ãƒšãƒ¼ã‚¸
â”‚   â”œâ”€â”€ profile/           # ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãƒšãƒ¼ã‚¸
â”‚   â””â”€â”€ api/               # API Routes
â”œâ”€â”€ components/            # å†åˆ©ç”¨å¯èƒ½ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”œâ”€â”€ ui/                # åŸºæœ¬UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”œâ”€â”€ map/               # ãƒãƒƒãƒ—é–¢é€£ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”œâ”€â”€ forms/             # ãƒ•ã‚©ãƒ¼ãƒ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â””â”€â”€ layout/            # ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”œâ”€â”€ hooks/                 # ã‚«ã‚¹ã‚¿ãƒ React Hooks
â”œâ”€â”€ lib/                   # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ãƒ»è¨­å®š
â”‚   â”œâ”€â”€ supabase.ts
â”‚   â”œâ”€â”€ mapbox.ts
â”‚   â””â”€â”€ utils.ts
â”œâ”€â”€ types/                 # TypeScriptå‹å®šç¾©
â””â”€â”€ constants/             # å®šæ•°å®šç¾©
```

## ğŸ—„ï¸ Supabaseè¨­å®š

### ä¸»è¦ãƒ†ãƒ¼ãƒ–ãƒ«
- `works` - ä½œå“æƒ…å ±
- `spots` - è–åœ°ã‚¹ãƒãƒƒãƒˆæƒ…å ±
- `spot_images` - ã‚¹ãƒãƒƒãƒˆç”»åƒ
- `reviews` - ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ»å£ã‚³ãƒŸ
- `user_favorite_works` - ãŠæ°—ã«å…¥ã‚Šä½œå“
- `user_favorite_spots` - ãŠæ°—ã«å…¥ã‚Šã‚¹ãƒãƒƒãƒˆ

### Row Level Security (RLS)
```sql
-- spotsãƒ†ãƒ¼ãƒ–ãƒ«ã®RLSãƒãƒªã‚·ãƒ¼ä¾‹
CREATE POLICY "å…¬é–‹ã•ã‚ŒãŸã‚¹ãƒãƒƒãƒˆã¯èª°ã§ã‚‚é–²è¦§å¯èƒ½" ON spots
  FOR SELECT USING (is_approved = true);

CREATE POLICY "ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯è‡ªåˆ†ã®æŠ•ç¨¿ã‚’ç·¨é›†å¯èƒ½" ON spots
  FOR UPDATE USING (auth.uid() = user_id);
```

### ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ©Ÿèƒ½
```sql
-- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è³¼èª­ã‚’æœ‰åŠ¹åŒ–
ALTER PUBLICATION supabase_realtime ADD TABLE spots;
ALTER PUBLICATION supabase_realtime ADD TABLE reviews;
```

## ğŸ—ºï¸ Mapboxè¨­å®š

### æ¨å¥¨ã‚¹ã‚¿ã‚¤ãƒ«
- **åŸºæœ¬**: `mapbox://styles/mapbox/streets-v11`
- **è¡›æ˜Ÿ**: `mapbox://styles/mapbox/satellite-v9`
- **ãƒ€ãƒ¼ã‚¯**: `mapbox://styles/mapbox/dark-v10`

### åœ°å›³ã®åˆæœŸè¨­å®š
```typescript
const mapConfig = {
  initialViewState: {
    latitude: 35.6762, // æ±äº¬ã®ç·¯åº¦
    longitude: 139.6503, // æ±äº¬ã®çµŒåº¦
    zoom: 10
  },
  style: 'mapbox://styles/mapbox/streets-v11',
  mapboxAccessToken: process.env.NEXT_PUBLIC_MAPBOX_ACCESS_TOKEN
};
```

## ğŸ¨ UIãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒ»ãƒ‡ã‚¶ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ 

### Headless UI + Heroicons
- **ç”¨é€”**: ã‚¢ã‚¯ã‚»ã‚·ãƒ–ãƒ«ãªUIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- **ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«**: `npm install @headlessui/react @heroicons/react`

### ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆï¼ˆTailwindï¼‰
```css
/* ã‚«ã‚¹ã‚¿ãƒ ã‚«ãƒ©ãƒ¼ä¾‹ */
:root {
  --primary: #3B82F6;    /* blue-500 */
  --secondary: #8B5CF6;  /* violet-500 */
  --accent: #F59E0B;     /* amber-500 */
  --neutral: #6B7280;    /* gray-500 */
}
```

## ğŸ” SEOãƒ»ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿è¨­å®š

### Next.js Metadata API
```typescript
// app/layout.tsx
export const metadata: Metadata = {
  title: 'è–åœ°å·¡ç¤¼ãƒãƒƒãƒ—',
  description: 'ã‚¢ãƒ‹ãƒ¡ãƒ»ãƒ‰ãƒ©ãƒã®è–åœ°ã‚’ç°¡å˜ã«è¦‹ã¤ã‘ã‚‰ã‚Œã‚‹ãƒãƒƒãƒ—ã‚µãƒ¼ãƒ“ã‚¹',
  keywords: ['è–åœ°å·¡ç¤¼', 'ã‚¢ãƒ‹ãƒ¡', 'ãƒ‰ãƒ©ãƒ', 'ãƒ­ã‚±åœ°', 'ãƒãƒƒãƒ—'],
  openGraph: {
    title: 'è–åœ°å·¡ç¤¼ãƒãƒƒãƒ—',
    description: 'ã‚¢ãƒ‹ãƒ¡ãƒ»ãƒ‰ãƒ©ãƒã®è–åœ°ã‚’ç°¡å˜ã«è¦‹ã¤ã‘ã‚‰ã‚Œã‚‹ãƒãƒƒãƒ—ã‚µãƒ¼ãƒ“ã‚¹',
    type: 'website',
    url: 'https://your-domain.com',
  }
};
```

## ğŸ“± ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ

### Tailwind ãƒ–ãƒ¬ãƒ¼ã‚¯ãƒã‚¤ãƒ³ãƒˆ
- `sm`: 640pxä»¥ä¸Š
- `md`: 768pxä»¥ä¸Š
- `lg`: 1024pxä»¥ä¸Š
- `xl`: 1280pxä»¥ä¸Š
- `2xl`: 1536pxä»¥ä¸Š

## ğŸš€ ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ»æœ¬ç•ªç’°å¢ƒ

### Vercelè¨­å®š
1. GitHubãƒªãƒã‚¸ãƒˆãƒªé€£æº
2. ç’°å¢ƒå¤‰æ•°è¨­å®š
3. è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤è¨­å®š

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
- Next.js Image Optimization
- Code Splittingï¼ˆè‡ªå‹•ï¼‰
- Bundle Analyzerä½¿ç”¨æ¨å¥¨

---

## ğŸ”— å‚è€ƒãƒªãƒ³ã‚¯

- [Next.jså…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://nextjs.org/docs)
- [Supabaseå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://supabase.com/docs)
- [react-map-glå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://visgl.github.io/react-map-gl/)
- [Tailwind CSSå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://tailwindcss.com/docs)
- [Mapbox GL JS API](https://docs.mapbox.com/mapbox-gl-js/api/)
- [Biomeå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://biomejs.dev/)

ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯æŠ€è¡“é¸å®šã‚„å®Ÿè£…æ™‚ã®å‚è€ƒã¨ã—ã¦æ´»ç”¨ã—ã¦ãã ã•ã„ã€‚ 